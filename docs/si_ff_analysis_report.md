# SI (シンカー) vs FF (4シーム) 誤分類詳細分析レポート

## 1. 概要
- **ターゲット**: SI (正解) -> FF (予測) の誤分類 **1,547件** (検証用データ内)
- **目的**: 誤分類された球種が、物理的に「4シームと区別がつかない」のか、それとも「独自の特徴」を持っているのかを解明する。

## 2. 結論要約
**誤分類されたSIは、典型的なSIとも典型的なFFとも異なる「中間的な球種」です。**
物理的には **「シュート成分が少なく、かつ少しホップするシンカー（棒球）」** です。

| 特徴量 | 正解 FF (平均) | 誤分類 SI->FF (平均) | 正解 SI (平均) | 判定 |
| :--- | :--- | :--- | :--- | :--- |
| **縦変化 (pfx_z)** | **1.32** | **1.13** | **0.64** | **FF寄りだが区別可能** (d=0.81) |
| **横変化 (pfx_x)** | **-0.62** | **-0.93** | **-1.26** | **中間** (FFより曲がり、SIより曲がらない) |
| **沈み率 (sink_rate)** | -3.77 | -1.54 | -0.47 | **明確に異なる** |

## 3. 詳細分析

### 3.1. 縦変化 (Vertical Rise / pfx_z)
- **現象**: 誤分類されたSIは、通常のSI (0.64) よりも **圧倒的にホップしています** (1.13)。
- **FFとの比較**: しかし、通常のFF (1.32) に比べると **まだ0.2ほど低い** です。
- **統計的距離 (Cohen's d)**:
    - vs 正解FF: **-0.81** (大): 通常のFFとは分布が異なります。
    - vs 正解SI: **1.29** (特大): 通常のSIとは完全に別物です。

### 3.2. 横変化 (Horizontal Break / pfx_x)
- **現象**: 誤分類されたSIは、通常のSI (-1.26) ほど **曲がりません** (-0.93)。
- **FFとの比較**: しかし、通常のFF (-0.62) よりは **シュートしています**。
- **統計的距離**:
    - vs 正解FF: **-0.95** (大): FFよりは明確にシュート成分があります。

### 3.3. 考察
モデルは `pfx_z` (縦変化) を最も重要な特徴量として見ており、**「pfx_z が高い = FF」** という単純な境界線を引いている可能性が高いです。
誤分類されたSIは `pfx_z` が `1.13` と高いため、モデルはこの境界線を超えて「FF」と判定しました。

しかし、`sink_rate` や `pfx_x` を見ると、これらはまだFFとは異なる特徴を持っています。
特に **「縦変化はFFに近いが、横変化はSIに近い（シュートしている）」** というねじれ現象が起きています。

## 4. モデル改善の実施と結果

### 4.1 施策内容：ハイパーパラメータチューニング
「中間的な球種」である誤分類データをより正確に捉えるため、XGBoostモデルのパラメータ探索範囲を拡張し、より複雑な境界線を学習できるように調整を行いました。

*   **変更点**:
    *   `max_depth`: `[5, 7]` -> `[6, 8, 10]` (より深い木を許容)
    *   `min_child_weight`: `[1]` -> `[1, 0.5]` (より少数のデータ群を葉として許容)

### 4.2 改善結果
パラメータ調整後のモデル（`max_depth=10`, `min_child_weight=0.5`）にて再学習を行った結果、以下の改善が見られました。

*   **全体精度 (Accuracy)**: 0.932 -> **0.942**
*   **SI（シンカー）のF1 Score**: 0.820 -> **0.862**
*   **SI -> FF 誤分類数**: 1547件 -> **1098件** (約29%減少)

### 4.3 考察
`min_child_weight` を小さくし `max_depth` を深くしたことで、従来「Fastball」の大雑把な括りに吸収されていた「沈みの小さいシンカー」や「シュート回転の少ないシンカー」の微細な特徴境界をモデルが捉えられるようになったと考えられます。
物理的に完全に重複している領域（約1000件）は残存していますが、モデルの学習能力不足に起因する約450件の誤分類を解消することに成功しました。

## 5. 今後の課題
残りの約1000件の誤分類は、物理的特徴（変化量、球速、リリース位置など）において4-Seam Fastballと区別がつかない「完全な中間球」である可能性が高いです。これらをさらに分離するには、Statcastデータ以外の情報（投手の癖、投球フォーム、打者の反応など）や、時系列的な配球データなど、新しい次元の特徴量が必要になるでしょう。
